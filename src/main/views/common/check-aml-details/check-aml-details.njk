{% from "govuk/components/table/macro.njk" import govukTable %}
{% from "govuk/components/inset-text/macro.njk" import govukInsetText %}
{% extends "layouts/default.njk" %}
{% block main_content %}
    <div class="govuk-grid-row">
        <div class="govuk-grid-column-two-thirds">
         <form class="form" action="" method="post">
            {% if typeOfBusiness === "SOLE_TRADER" %}
               {% include "partials/user_name.njk" %}
            {% else %}   
               {% include "partials/business_name.njk" %}
            {% endif %}

            <h1 class="govuk-fieldset__heading">
               <label class="govuk-label govuk-label--l">{{ i18n.checkAmlDetailsTitle }}</label>
            </h1>
            <p class="govuk-body">{{ i18n.checkAmlDetailsText1 }}</p>
            <p class="govuk-body">{{ i18n.checkAmlDetailsText2 }}</p>

            {# Prepare table rows #}
            {% set ROWS = [] %}
            {% for body in amlSupervisoryBodies %}
                {% set row = [
                {text: body.amlSupervisoryBody},
                {text: body.membershipId},
                {html: "<a href=" + url + "#" + "membershipNumber_" + loop.index + ">" + i18n.checkAmlDetailsChange + "</a>"}
                ] %}
                {% set ROWS = ROWS.concat([row]) %}
            {% endfor %}

            {{ govukTable({
              caption: "Anti-Money Laundering (AML) details",
              captionClasses: "govuk-table__caption--m",
              firstCellIsHeader: true,
              head: [
                {
                  text: "AML supervisory body"
                },
                {
                  text: "AML membership number"
                },
                {
                  text: ""
                }
              ],
              rows: ROWS
            }) }}
            {{ govukInsetText({
                text: i18n.checkAmlDetailsText3
            }) }}

            <button class="govuk-button" data-module="govuk-button">
               {{i18n.confirm}}
            </button>
         </form>
        </div>
    </div>
{% endblock %}